This tool discovers parallelism in the high-level design of a parallel application. It generates the may-happen-in-parallel (MHP) facts of tasks invoked by the parallel application. 


How to get this tool
--------------------

Get the tool from the github repository: https://github.com/anm-spa/MHP.git


Installation Requirements
-------------------------

You shall need the following tools and environment:

1) python (checked with the python version 2.7.9)

2)

You need to have the SWI prolog (http://www.swi-prolog.org/) installed and available in your shell command.  At ericsson environment (in one of the teamserver) you may check availability by the following command:

      Command: module avail swipl 

You may have either swipl/7.2.3(default) or swipl/7.3.11). Either of the version works fine, Command: module add swipl

Outside Ericsson environment, you may need to install it by yourself. Instruction is available at http://www.swi-prolog.org/build/unix.html for for Linux. Simple command sequences to install swipl are the following:

	git clone https://github.com/SWI-Prolog/swipl-devel.git
	cd swipl-devel
	./prepare
	cp -p build.templ build
	./build

Note that swipl should support sgml library to parse xml. 

3) You need to have the racer tool developed under the clang/llvm environment 



You will also  need to install llvm/clang if you want to check data race. Please note that installing llvm requires quite some time, and you may need to increase your swap space. You also need to include the Racer tool (available at https://github.com/anm-spa/Racer) in the clang framework.

This tool is tested in Ubuntu and Red-Hat Linux

How to get MHP tool
--------------------

Git Command: git clone https://github.com/anm-spa/MHP.git

Github Link: https://github.com/anm-spa/MHP



Installing LLVM and Racer Tool
------------------------------

You need to clone the github repository (git clone https://github.com/anm-spa/Racer.git) and follow the HowToGuide included in the Racer.


How to Use
----------

It is pretty simple to use this tool. You need to do the following:
	
	1. Download the repo by using the following shell comand: git clone https://github.com/anm-spa/MHP.git
	2. Change the working directory to MHP: cd MHP
	3. You need to set two variables: BBDIR (your application directory), and LLVMBIN (llvm binary directory). You can directly edit them in the Makefile or give values as parameters to make
	4. Run the following command: make DIVE=DiveFileToAnalyze build [BBDIR=YourBBDirectory] [LLVMBIN=YourLLVMBinaryDirectory]

It will generate (among many other things) the following two files:

1. src/autogen/mhp.pl : it is a prolog file containing the MHP facts such as "mhp(T1,T2)" saying that task T1 and T2 are running in parallel. You can inspect this file if you want. 
2. bbTest/checkrace: it is a scripting file that can directly be executed if you have the racer tool available. You can directly modify the script. Initially all available commands are commented. You need to manually uncomment the command before execution.


